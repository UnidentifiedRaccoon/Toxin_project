include ../button/button
include ../input/input

//-
    options.mode - "persons"/"facilities" - создает дропдаун с соответствующим содержимым


    Данное решение принято исходя из того, что данные параметры чаще всего остаются неизменными (или редко изменяются)
    options.placeholder - (Не передается в mixin) позволяет задать placeholder
                        для поля dropdown основываясь на options.mode
    options.items - (Не передается в mixin) позволяет задать items
                - элементы поля dropdown основываясь на options.mode
    options.items - (Не передается в mixin) позволяет задать items


mixin dropdown(options)

    -
        //- Данные
        var personsChoice = ['Взрослые', 'Дети', 'Младенцы']
        var conditionsChoice = ['Спальни', 'Кровати', 'Ванные комнаты']

        var modeClass = 'dropdown' + options.mode
        //- В зависимости от переданных параметров мы выбираем,
        //- какие данные следует использовать
        options.items = (options.mode === 'persons') ? personsChoice : conditionsChoice;
        options.placeholder = (options.mode === 'persons') ? 'Сколько гостей' : 'Сколько комнат'
        options.labelText = (options.mode === 'persons') ? 'Гости' : 'Удобства номера'

    .dropdown(class=modeClass data-mode=options.mode)
        +input({
            labelText: options.labelText,
            type: 'text',
            placeholder: options.placeholder,
            mode: "dropdown-style",
        })(class="dropdown__field" readonly)
        .dropdown__content-box
            ul.dropdown__list
                    - var i = 0;
                    //- Генерация элементов dropdown исходя из элементов options.items
                    each item in options.items
                        li.dropdown__item(data-item=i++)
                            span.dropdown__item-text= item
                            .dropdown__button-box
                                button.dropdown__item-button.dropdown__item-button--decrease(type="button" disabled data-operation="decrease") -
                                input.dropdown__item-count(value='0' min='0', max='20')
                                button.dropdown__item-button.dropdown__item-button--increase(type="button" data-operation="increase") +
            //-  Кнопки принятия и сброса
            if options.mode === 'persons'
                .dropdown__bottom-buttons
                    .dropdown__button
                        +button({text: 'Очистить', type: 'button'})(class='dropdown__button--reset')
                    .dropdown__button
                        +button({text: 'Применить', type: 'button'})(class='dropdown__button--apply')
